<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>BynnWong</title>
  
  <subtitle>「  再見  」</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://wongb.in/"/>
  <updated>2017-12-31T16:54:05.756Z</updated>
  <id>http://wongb.in/</id>
  
  <author>
    <name>Bynn</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>2018</title>
    <link href="http://wongb.in/2018/01/01/2018/"/>
    <id>http://wongb.in/2018/01/01/2018/</id>
    <published>2017-12-31T16:33:09.000Z</published>
    <updated>2017-12-31T16:54:05.756Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><br>佚名<br></blockquote><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">瀑布的水逆流而上，</span><br><span class="line">蒲公英的种子从远处飘回，变成伞的模样。</span><br><span class="line">太阳从西边升起，落向东方。</span><br><span class="line">子弹退回枪膛，</span><br><span class="line">运动员回到起跑线上，</span><br><span class="line">我交回录取通知书，忘了十年寒窗。</span><br><span class="line">厨房里飘来饭菜的香，</span><br><span class="line">你把我的卷子签好名字，</span><br><span class="line">关掉电视，帮我把书包背上。</span><br><span class="line">你还在我身旁。</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;br&gt;佚名&lt;br&gt;&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="诗" scheme="http://wongb.in/tags/%E8%AF%97/"/>
    
  </entry>
  
  <entry>
    <title> linux挂载谷歌网盘(Googledrive)</title>
    <link href="http://wongb.in/2017/12/29/linux%E6%8C%82%E8%BD%BD%E8%B0%B7%E6%AD%8C%E7%BD%91%E7%9B%98-Googledrive/"/>
    <id>http://wongb.in/2017/12/29/linux挂载谷歌网盘-Googledrive/</id>
    <published>2017-12-29T13:05:05.000Z</published>
    <updated>2017-12-29T13:15:14.785Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p>linux挂载谷歌网盘(Googledrive)详细办法 </p></div><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Ubuntu 15.04, 14.10, 14.04</span></span><br><span class="line">apt-get update</span><br><span class="line">sudo apt-get install python-software-properties</span><br><span class="line">sudo apt-get install software-properties-common</span><br><span class="line">sudo add-apt-repository ppa:alessandro-strada/ppa</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install google-drive-ocamlfuse</span><br><span class="line">sudo apt-get install ocaml camlp4-extra</span><br><span class="line">git clone https:<span class="comment">//github.com/OCamlPro/opam.git</span></span><br><span class="line">cd opam</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br><span class="line">sudo apt-get install m4 libcurl4-gnutls-dev libfuse-dev libsqlite3-dev</span><br><span class="line">opam init</span><br><span class="line">opam update</span><br><span class="line">opam install google-drive-ocamlfuse</span><br></pre></td></tr></table></figure><p>谷歌网盘地址：<a href="https://drive.google.com/drive/" target="_blank" rel="noopener">https://drive.google.com/drive/</a></p><p>操作环境是Ubuntu 14.04</p><p>可能出现了下面的错误，</p><p>问题1：没有git，执行下面语句安装<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install git -y</span><br></pre></td></tr></table></figure></p><p>问题2：缺少make，执行下面语句安装<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install make -y</span><br></pre></td></tr></table></figure></p><p>问题3：Makefile:41: <em>*</em> Dependencies missing. Either run ‘make lib-ext’ or install them and re-run ‘./configure’. Stop.</p><p>解决方法：执行 make lib-ext ，完事再执行make</p><p>然后将你的用户添加到fuse组，我直接使用root<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -a -G fuse root</span><br></pre></td></tr></table></figure></p><p>添加ID和Secret<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">google-drive-ocamlfuse -headless -label googledrive -id 你的id -secret 你的secret</span><br></pre></td></tr></table></figure></p><p>id及secret获取方式</p><p>获取地址：<a href="https://code.google.com/apis/console/" target="_blank" rel="noopener">https://code.google.com/apis/console/</a></p><p>登录自己的账号后，选择drive api</p><p>然后需要创建项目，名字自己随便起一个</p><p>获取一个ID和一个secret，在凭据列表中也可以查看</p><p>输入ID和secret之后，会给你一个地址，在浏览器中打开地址，“允许”，然后复制里面的code</p><p>进入.gdfuse/googledrive中，编辑配置文件，最后面verification_code补充刚才你复制的code（和上面的一样）<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~<span class="regexp">/.gdfuse/g</span>oogledrive</span><br><span class="line">vim config</span><br></pre></td></tr></table></figure></p><p>现在，我们可以新建一个googledrive文件夹，将我们的Google Drive网盘挂载到VPS主机上（注意支持挂载多个账户）<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~<span class="regexp">/googledrive</span></span><br><span class="line"><span class="regexp">google-drive-ocamlfuse -label googledrive ~/g</span>oogledrive</span><br><span class="line">#挂载多个账户，命令格式</span><br><span class="line">google-drive-ocamlfuse -label label [mountpoint]</span><br></pre></td></tr></table></figure></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;linux挂载谷歌网盘(Googledrive)详细办法 &lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
    
      <category term="linux" scheme="http://wongb.in/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>一键自动化测试脚本bench.sh</title>
    <link href="http://wongb.in/2017/12/29/%E4%B8%80%E9%94%AE%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E8%84%9A%E6%9C%ACbench-sh/"/>
    <id>http://wongb.in/2017/12/29/一键自动化测试脚本bench-sh/</id>
    <published>2017-12-29T13:01:38.000Z</published>
    <updated>2017-12-31T16:55:27.909Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><br>测试脚本 bench.sh 以及用法<br></blockquote><a id="more"></a><p>总结一下 bench.sh 特点：<br>1、显示当前测试的各种系统信息；<br>2、取自世界多处的知名数据中心的测试点，下载测试比较全面；<br>3、支持 IPv6 下载测速；<br>4、IO 测试三次，并显示平均值。</p><p>再配合 unixbench.sh 脚本测试，即可全面测试 VPS 的性能。</p><p>使用方法：</p><ul><li><p>命令1：</p><p>wget -qO- bench.sh | bash</p><p>curl -Lso- bench.sh | bash</p></li></ul><hr><ul><li><p>命令2：</p><p>wget -qO- 86.re/bench.sh | bash</p><p>curl -so- 86.re/bench.sh | bash</p></li></ul><hr><p>备注：</p><p>bench.sh 既是脚本名，同时又是域名。所以不要怀疑我写错了或者你看错了。</p><p>一键测试脚本：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env bash</span></span><br><span class="line">#</span><br><span class="line"># Description: Auto test download &amp; I/O speed script</span><br><span class="line">#</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>  [ ! -e <span class="string">'/usr/bin/wget'</span> ]; then</span><br><span class="line">    echo <span class="string">"Error: wget command not found. You must be install wget command at first."</span></span><br><span class="line">    exit <span class="number">1</span></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># Colors</span><br><span class="line">RED=<span class="string">'\033[0;31m'</span></span><br><span class="line">GREEN=<span class="string">'\033[0;32m'</span></span><br><span class="line">YELLOW=<span class="string">'\033[0;33m'</span></span><br><span class="line">PLAIN=<span class="string">'\033[0m'</span></span><br><span class="line"></span><br><span class="line">get_opsy() &#123;</span><br><span class="line">    [ -f /etc/redhat-release ] &amp;&amp; awk <span class="string">'&#123;print ($1,$3~/^[0-9]/?$3:$4)&#125;'</span> /etc/redhat-release &amp;&amp; <span class="keyword">return</span></span><br><span class="line">    [ -f /etc/os-release ] &amp;&amp; awk -F<span class="string">'[= "]'</span> <span class="string">'/PRETTY_NAME/&#123;print $3,$4,$5&#125;'</span> /etc/os-release &amp;&amp; <span class="keyword">return</span></span><br><span class="line">    [ -f /etc/lsb-release ] &amp;&amp; awk -F<span class="string">'[="]+'</span> <span class="string">'/DESCRIPTION/&#123;print $2&#125;'</span> /etc/lsb-release &amp;&amp; <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">next() &#123;</span><br><span class="line">    printf <span class="string">"%-70s\n"</span> <span class="string">"-"</span> | sed <span class="string">'s/\s/-/g'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">speed_test() &#123;</span><br><span class="line">    local speedtest=$(wget <span class="number">-4</span>O /dev/<span class="literal">null</span> -T300 $<span class="number">1</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span> | awk <span class="string">'/\/dev\/null/ &#123;speed=$3 $4&#125; END &#123;gsub(/\(|\)/,"",speed); print speed&#125;'</span>)</span><br><span class="line">    local ipaddress=$(ping -c1 -n <span class="string">`awk -F'/' '&#123;print $3&#125;' &lt;&lt;&lt; $1`</span> | awk -F<span class="string">'[()]'</span> <span class="string">'&#123;print $2;exit&#125;'</span>)</span><br><span class="line">    local nodeName=$<span class="number">2</span></span><br><span class="line">    printf <span class="string">"$&#123;YELLOW&#125;%-32s$&#123;GREEN&#125;%-24s$&#123;RED&#125;%-14s$&#123;PLAIN&#125;\n"</span> <span class="string">"$&#123;nodeName&#125;"</span> <span class="string">"$&#123;ipaddress&#125;"</span> <span class="string">"$&#123;speedtest&#125;"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">speed_test_v6() &#123;</span><br><span class="line">    local speedtest=$(wget <span class="number">-6</span>O /dev/<span class="literal">null</span> -T300 $<span class="number">1</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span> | awk <span class="string">'/\/dev\/null/ &#123;speed=$3 $4&#125; END &#123;gsub(/\(|\)/,"",speed); print speed&#125;'</span>)</span><br><span class="line">    local ipaddress=$(ping6 -c1 -n <span class="string">`awk -F'/' '&#123;print $3&#125;' &lt;&lt;&lt; $1`</span> | awk -F<span class="string">'[()]'</span> <span class="string">'&#123;print $2;exit&#125;'</span>)</span><br><span class="line">    local nodeName=$<span class="number">2</span></span><br><span class="line">    printf <span class="string">"$&#123;YELLOW&#125;%-32s$&#123;GREEN&#125;%-24s$&#123;RED&#125;%-14s$&#123;PLAIN&#125;\n"</span> <span class="string">"$&#123;nodeName&#125;"</span> <span class="string">"$&#123;ipaddress&#125;"</span> <span class="string">"$&#123;speedtest&#125;"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">speed() &#123;</span><br><span class="line">    speed_test <span class="string">'http://cachefly.cachefly.net/100mb.test'</span> <span class="string">'CacheFly'</span></span><br><span class="line">    speed_test <span class="string">'http://speedtest.tokyo.linode.com/100MB-tokyo.bin'</span> <span class="string">'Linode, Tokyo, JP'</span></span><br><span class="line">    speed_test <span class="string">'http://speedtest.singapore.linode.com/100MB-singapore.bin'</span> <span class="string">'Linode, Singapore, SG'</span></span><br><span class="line">    speed_test <span class="string">'http://speedtest.london.linode.com/100MB-london.bin'</span> <span class="string">'Linode, London, UK'</span></span><br><span class="line">    speed_test <span class="string">'http://speedtest.frankfurt.linode.com/100MB-frankfurt.bin'</span> <span class="string">'Linode, Frankfurt, DE'</span></span><br><span class="line">    speed_test <span class="string">'http://speedtest.fremont.linode.com/100MB-fremont.bin'</span> <span class="string">'Linode, Fremont, CA'</span></span><br><span class="line">    speed_test <span class="string">'http://speedtest.dal05.softlayer.com/downloads/test100.zip'</span> <span class="string">'Softlayer, Dallas, TX'</span></span><br><span class="line">    speed_test <span class="string">'http://speedtest.sea01.softlayer.com/downloads/test100.zip'</span> <span class="string">'Softlayer, Seattle, WA'</span></span><br><span class="line">    speed_test <span class="string">'http://speedtest.fra02.softlayer.com/downloads/test100.zip'</span> <span class="string">'Softlayer, Frankfurt, DE'</span></span><br><span class="line">    speed_test <span class="string">'http://speedtest.sng01.softlayer.com/downloads/test100.zip'</span> <span class="string">'Softlayer, Singapore, SG'</span></span><br><span class="line">    speed_test <span class="string">'http://speedtest.hkg02.softlayer.com/downloads/test100.zip'</span> <span class="string">'Softlayer, HongKong, CN'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">speed_v6() &#123;</span><br><span class="line">    speed_test_v6 <span class="string">'http://speedtest.atlanta.linode.com/100MB-atlanta.bin'</span> <span class="string">'Linode, Atlanta, GA'</span></span><br><span class="line">    speed_test_v6 <span class="string">'http://speedtest.dallas.linode.com/100MB-dallas.bin'</span> <span class="string">'Linode, Dallas, TX'</span></span><br><span class="line">    speed_test_v6 <span class="string">'http://speedtest.newark.linode.com/100MB-newark.bin'</span> <span class="string">'Linode, Newark, NJ'</span></span><br><span class="line">    speed_test_v6 <span class="string">'http://speedtest.singapore.linode.com/100MB-singapore.bin'</span> <span class="string">'Linode, Singapore, SG'</span></span><br><span class="line">    speed_test_v6 <span class="string">'http://speedtest.tokyo.linode.com/100MB-tokyo.bin'</span> <span class="string">'Linode, Tokyo, JP'</span></span><br><span class="line">    speed_test_v6 <span class="string">'http://speedtest.sjc03.softlayer.com/downloads/test100.zip'</span> <span class="string">'Softlayer, San Jose, CA'</span></span><br><span class="line">    speed_test_v6 <span class="string">'http://speedtest.wdc01.softlayer.com/downloads/test100.zip'</span> <span class="string">'Softlayer, Washington, WA'</span></span><br><span class="line">    speed_test_v6 <span class="string">'http://speedtest.par01.softlayer.com/downloads/test100.zip'</span> <span class="string">'Softlayer, Paris, FR'</span></span><br><span class="line">    speed_test_v6 <span class="string">'http://speedtest.sng01.softlayer.com/downloads/test100.zip'</span> <span class="string">'Softlayer, Singapore, SG'</span></span><br><span class="line">    speed_test_v6 <span class="string">'http://speedtest.tok02.softlayer.com/downloads/test100.zip'</span> <span class="string">'Softlayer, Tokyo, JP'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">io_test() &#123;</span><br><span class="line">    (LANG=C dd <span class="keyword">if</span>=<span class="regexp">/dev/</span>zero <span class="keyword">of</span>=test_$$ bs=<span class="number">64</span>k count=<span class="number">16</span>k conv=fdatasync &amp;&amp; rm -f test_$$ ) <span class="number">2</span>&gt;&amp;<span class="number">1</span> | awk -F, <span class="string">'&#123;io=$NF&#125; END &#123; print io&#125;'</span> | sed <span class="string">'s/^[ \t]*//;s/[ \t]*$//'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">calc_disk() &#123;</span><br><span class="line">    local total_size=<span class="number">0</span></span><br><span class="line">    local array=$@</span><br><span class="line">    <span class="keyword">for</span> size <span class="keyword">in</span> $&#123;array[@]&#125;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        [ <span class="string">"$&#123;size&#125;"</span> == <span class="string">"0"</span> ] &amp;&amp; size_t=<span class="number">0</span> || size_t=<span class="string">`echo <span class="subst">$&#123;size:<span class="number">0</span>:$&#123;#size&#125;</span>-1&#125;`</span></span><br><span class="line">        [ <span class="string">"`echo $&#123;size:(-1)&#125;`"</span> == <span class="string">"K"</span> ] &amp;&amp; size=<span class="number">0</span></span><br><span class="line">        [ <span class="string">"`echo $&#123;size:(-1)&#125;`"</span> == <span class="string">"M"</span> ] &amp;&amp; size=$( awk <span class="string">'BEGIN&#123;printf "%.1f", '</span>$size_t<span class="string">' / 1024&#125;'</span> )</span><br><span class="line">        [ <span class="string">"`echo $&#123;size:(-1)&#125;`"</span> == <span class="string">"T"</span> ] &amp;&amp; size=$( awk <span class="string">'BEGIN&#123;printf "%.1f", '</span>$size_t<span class="string">' * 1024&#125;'</span> )</span><br><span class="line">        [ <span class="string">"`echo $&#123;size:(-1)&#125;`"</span> == <span class="string">"G"</span> ] &amp;&amp; size=$&#123;size_t&#125;</span><br><span class="line">        total_size=$( awk <span class="string">'BEGIN&#123;printf "%.1f", '</span>$total_size<span class="string">' + '</span>$size<span class="string">'&#125;'</span> )</span><br><span class="line">    done</span><br><span class="line">    echo $&#123;total_size&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cname=$( awk -F: <span class="string">'/model name/ &#123;name=$2&#125; END &#123;print name&#125;'</span> /proc/cpuinfo | sed <span class="string">'s/^[ \t]*//;s/[ \t]*$//'</span> )</span><br><span class="line">cores=$( awk -F: <span class="string">'/model name/ &#123;core++&#125; END &#123;print core&#125;'</span> /proc/cpuinfo )</span><br><span class="line">freq=$( awk -F: <span class="string">'/cpu MHz/ &#123;freq=$2&#125; END &#123;print freq&#125;'</span> /proc/cpuinfo | sed <span class="string">'s/^[ \t]*//;s/[ \t]*$//'</span> )</span><br><span class="line">tram=$( free -m | awk <span class="string">'/Mem/ &#123;print $2&#125;'</span> )</span><br><span class="line">uram=$( free -m | awk <span class="string">'/Mem/ &#123;print $3&#125;'</span> )</span><br><span class="line">swap=$( free -m | awk <span class="string">'/Swap/ &#123;print $2&#125;'</span> )</span><br><span class="line">uswap=$( free -m | awk <span class="string">'/Swap/ &#123;print $3&#125;'</span> )</span><br><span class="line">up=$( awk <span class="string">'&#123;a=$1/86400;b=($1%86400)/3600;c=($1%3600)/60&#125; &#123;printf("%d days, %d hour %d min\n",a,b,c)&#125;'</span> /proc/uptime )</span><br><span class="line">load=$( w | head <span class="number">-1</span> | awk -F<span class="string">'load average:'</span> <span class="string">'&#123;print $2&#125;'</span> | sed <span class="string">'s/^[ \t]*//;s/[ \t]*$//'</span> )</span><br><span class="line">opsy=$( get_opsy )</span><br><span class="line">arch=$( uname -m )</span><br><span class="line">lbit=$( getconf LONG_BIT )</span><br><span class="line">kern=$( uname -r )</span><br><span class="line">ipv6=$( wget -qO- -t1 -T2 ipv6.icanhazip.com )</span><br><span class="line">disk_size1=($( LANG=C df -ahPl | grep -wvE <span class="string">'\-|none|tmpfs|devtmpfs|by-uuid|chroot|Filesystem'</span> | awk <span class="string">'&#123;print $2&#125;'</span> ))</span><br><span class="line">disk_size2=($( LANG=C df -ahPl | grep -wvE <span class="string">'\-|none|tmpfs|devtmpfs|by-uuid|chroot|Filesystem'</span> | awk <span class="string">'&#123;print $3&#125;'</span> ))</span><br><span class="line">disk_total_size=$( calc_disk $&#123;disk_size1[@]&#125; )</span><br><span class="line">disk_used_size=$( calc_disk $&#123;disk_size2[@]&#125; )</span><br><span class="line"></span><br><span class="line">clear</span><br><span class="line">next</span><br><span class="line">echo <span class="string">"CPU model            : $cname"</span></span><br><span class="line">echo <span class="string">"Number of cores      : $cores"</span></span><br><span class="line">echo <span class="string">"CPU frequency        : $freq MHz"</span></span><br><span class="line">echo <span class="string">"Total size of Disk   : $disk_total_size GB ($disk_used_size GB Used)"</span></span><br><span class="line">echo <span class="string">"Total amount of Mem  : $tram MB ($uram MB Used)"</span></span><br><span class="line">echo <span class="string">"Total amount of Swap : $swap MB ($uswap MB Used)"</span></span><br><span class="line">echo <span class="string">"System uptime        : $up"</span></span><br><span class="line">echo <span class="string">"Load average         : $load"</span></span><br><span class="line">echo <span class="string">"OS                   : $opsy"</span></span><br><span class="line">echo <span class="string">"Arch                 : $arch ($lbit Bit)"</span></span><br><span class="line">echo <span class="string">"Kernel               : $kern"</span></span><br><span class="line">next</span><br><span class="line">io1=$( io_test )</span><br><span class="line">echo <span class="string">"I/O speed(1st run)   : $io1"</span></span><br><span class="line">io2=$( io_test )</span><br><span class="line">echo <span class="string">"I/O speed(2nd run)   : $io2"</span></span><br><span class="line">io3=$( io_test )</span><br><span class="line">echo <span class="string">"I/O speed(3rd run)   : $io3"</span></span><br><span class="line">ioraw1=$( echo $io1 | awk <span class="string">'NR==1 &#123;print $1&#125;'</span> )</span><br><span class="line">[ <span class="string">"`echo $io1 | awk 'NR==1 &#123;print $2&#125;'`"</span> == <span class="string">"GB/s"</span> ] &amp;&amp; ioraw1=$( awk <span class="string">'BEGIN&#123;print '</span>$ioraw1<span class="string">' * 1024&#125;'</span> )</span><br><span class="line">ioraw2=$( echo $io2 | awk <span class="string">'NR==1 &#123;print $1&#125;'</span> )</span><br><span class="line">[ <span class="string">"`echo $io2 | awk 'NR==1 &#123;print $2&#125;'`"</span> == <span class="string">"GB/s"</span> ] &amp;&amp; ioraw2=$( awk <span class="string">'BEGIN&#123;print '</span>$ioraw2<span class="string">' * 1024&#125;'</span> )</span><br><span class="line">ioraw3=$( echo $io3 | awk <span class="string">'NR==1 &#123;print $1&#125;'</span> )</span><br><span class="line">[ <span class="string">"`echo $io3 | awk 'NR==1 &#123;print $2&#125;'`"</span> == <span class="string">"GB/s"</span> ] &amp;&amp; ioraw3=$( awk <span class="string">'BEGIN&#123;print '</span>$ioraw3<span class="string">' * 1024&#125;'</span> )</span><br><span class="line">ioall=$( awk <span class="string">'BEGIN&#123;print '</span>$ioraw1<span class="string">' + '</span>$ioraw2<span class="string">' + '</span>$ioraw3<span class="string">'&#125;'</span> )</span><br><span class="line">ioavg=$( awk <span class="string">'BEGIN&#123;printf "%.1f", '</span>$ioall<span class="string">' / 3&#125;'</span> )</span><br><span class="line">echo <span class="string">"Average I/O speed    : $ioavg MB/s"</span></span><br><span class="line">next</span><br><span class="line">printf <span class="string">"%-32s%-24s%-14s\n"</span> <span class="string">"Node Name"</span> <span class="string">"IPv4 address"</span> <span class="string">"Download Speed"</span></span><br><span class="line">speed &amp;&amp; next</span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">"$ipv6"</span> != <span class="string">""</span> ]]; then</span><br><span class="line">    printf <span class="string">"%-32s%-24s%-14s\n"</span> <span class="string">"Node Name"</span> <span class="string">"IPv6 address"</span> <span class="string">"Download Speed"</span></span><br><span class="line">    speed_v6 &amp;&amp; next</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;br&gt;测试脚本 bench.sh 以及用法&lt;br&gt;&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="VPS" scheme="http://wongb.in/tags/VPS/"/>
    
  </entry>
  
  <entry>
    <title>换环境更新博客方法</title>
    <link href="http://wongb.in/2017/12/27/%E6%8D%A2%E7%8E%AF%E5%A2%83%E6%9B%B4%E6%96%B0%E5%8D%9A%E5%AE%A2%E6%96%B9%E6%B3%95/"/>
    <id>http://wongb.in/2017/12/27/换环境更新博客方法/</id>
    <published>2017-12-27T03:47:56.000Z</published>
    <updated>2017-12-27T04:30:33.805Z</updated>
    
    <content type="html"><![CDATA[<div class="note success"><p>使用hexo，如果换了电脑怎么更新博客？ </p></div><a id="more"></a><hr><p>1、从官网Git下载git，在新电脑上安装，因为https速度慢，而且每次都要输入口令，常用的是使用ssh。使用下面方法创建：<br>（1）打开git bash，在用户主目录下运行：ssh-keygen -t rsa -C “youremail@example.com” 把其中的邮件地址换成自己的邮件地址，然后一路回车<br>（2）最后完成后，会在用户主目录下生成.ssh目录，里面有id_rsa和id_rsa.pub两个文件，这两个就是SSH key密钥对，id_rsa是私钥，千万不能泄露出去，id_rsa.pub是公钥，可以放心地告诉任何人。<br>（3）登陆GitHub，打开「Settings」-&gt;「SSH and GPG keys」，然后点击「new SSH key」，填上任意Title，在Key文本框里粘贴公钥id_rsa.pub文件的内容（千万不要粘贴成私钥了！），最后点击「Add SSH Key」，你就应该看到已经添加的Key。<br>注意：不要在git版本库中运行ssh，然后又将它提交，这样就把密码泄露出去了。</p><hr><p>2、下载Node.js，并安装</p><hr><p>3、打开git bash客户端，输入 npm install hexo-cli -g，开始安装hexo</p><hr><p>4、下面就将原来的文件拷贝到新电脑中，但是要注意哪些文件是必须的，哪些文件是可以删除的。</p><p>（1）讨论下哪些文件是必须拷贝的：首先是之前自己修改的文件，像站点配置_config.yml，theme文件夹里面的主题，以及source里面自己写的博客文件，这些肯定要拷贝的。除此之外，还有三个文件需要有，就是scaffolds文件夹（文章的模板）、package.json（说明使用哪些包）和.gitignore（限定在提交的时候哪些文件可以忽略）。其实，这三个文件不是我们修改的，所以即使丢失了，也没有关系，我们可以建立一个新的文件夹，然后在里面执行hexo init，就会生成这三个文件，我们只需要将它们拷贝过来使用即可。总结：_config.yml，theme/，source/，scaffolds/，package.json，.gitignore，是需要拷贝的。</p><p>（2）再讨论下哪些文件是不必拷贝的，或者说可以删除的：首先是.git文件，无论是在站点根目录下，还是主题目录下的.git文件，都可以删掉。然后是文件夹node_modules（在用npm install会重新生成），public（这个在用hexo g时会重新生成），.deploy_git文件夹（在使用hexo d时也会重新生成），db.json文件。其实上面这些文件也就是.gitignore文件里面记载的可以忽略的内容。总结：.git/，node_modules/，public/，.deploy_git/，db.json文件需要删除。</p><hr><p>5、在git bash中切换目录到新拷贝的文件夹里，使用 npm install 命令，进行模块安装。很明显我们这里没用hexo init初始化，因为有的文件我们已经拷贝生成过来了，所以不必用hexo init去整体初始化，如果不慎在此时用了hexo init，则站点的配置文件_config.yml里面内容会被清空使用默认值，所以这一步一定要慎重，不要用hexo init。</p><hr><p>6、安装其他的一些必要组件，如果在node_modules里面有的，就不要重复安装了：<br>（1）为了使用hexo d来部署到git上，需要安装<br>npm install hexo-deployer-git –save<br>（2）为了建立RSS订阅，需要安装<br>npm install hexo-generator-feed –save<br>（3）为了建立站点地图，需要安装<br>npm install hexo-generator-sitemap –save<br>插件安装后，有的需要对配置文件_config.yml进行配置，具体怎么配置，可以参考上面插件在github主页上的具体说明</p><hr><p>7、使用hexo g，然后使用hexo d进行部署，如果都没有出错，就转移成功了！</p><hr>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note success&quot;&gt;&lt;p&gt;使用hexo，如果换了电脑怎么更新博客？ &lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
    
      <category term="hexo" scheme="http://wongb.in/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>总结 hexo 基本命令</title>
    <link href="http://wongb.in/2017/12/27/%E6%80%BB%E7%BB%93-hexo-%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/"/>
    <id>http://wongb.in/2017/12/27/总结-hexo-基本命令/</id>
    <published>2017-12-27T03:36:43.000Z</published>
    <updated>2017-12-31T16:55:57.432Z</updated>
    
    <content type="html"><![CDATA[<blockquote class="blockquote-center"><br>Hexo 基本操作及命令<br></blockquote><a id="more"></a><ul><li>总结   修改重要文件一定要先备份</li><li><p>Hexo   本地写文章一定先进入 安装文件夹</p><pre><code>&gt;hexo s  (端口被占用 hexo s -p 5000)&gt;hexo g  (编译)&gt;hexo d  (push github)&gt;hexo new&quot;postName&quot; #新建文章&gt;hexo new page&quot;pageName&quot; #新建页面&gt;hexo generate #生成静态页面至public目录&gt;hexo server #开启预览访问端口（默认端口4000，&apos;ctrl + c&apos;关闭server）&gt;hexo deploy #将.deploy目录部署到GitHub&gt;hexo help # 查看帮助&gt;hexo version #查看Hexo的版本</code></pre></li></ul><hr><p>一般用 <figure class="highlight plain"><figcaption><span>语言 这种语法表示代码区域，如:</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">            test</span><br></pre></td></tr></table></figure></p><hr><ul><li>报错总结</li></ul><hr><p>ERROR Deployer not found: git 或者 ERROR Deployer not found: github</p><p>解决方法： npm install hexo-deployer-git –save</p><hr><p>如发生报错： ERROR Process failed: layout/.DS_Store , 那么进入主题里面layout和_partial目录下，使用删除命令：</p><p>rm-rf.DS_Store</p><hr><p>ERROR Plugin load failed: hexo-server</p><p>原因：</p><p>Besides,utilities are separated into a standalone module.hexo.util is not reachable anymore.</p><p>解决方法，执行命令：</p><p>sudo npm install hexo-server</p><p>执行命令hexo server，提示：Usage: hexo ….</p><p>原因：</p><p>我认为是没有生成本地服务</p><p>解决方法，执行命令：</p><p>npm install hexo-server –save</p><hr><p>提示：hexo-server@0.1.2 node_modules/hexo-server</p><p>….</p><p>表示成功了参考</p><p>这个时候再执行：</p><p>hexo-server</p><p>得到:</p><p>INFOHexois running at <a href="http://0.0.0.0:4000/.PressCtrl+C" target="_blank" rel="noopener">http://0.0.0.0:4000/.PressCtrl+C</a> to stop.</p><p>这个时候再点击<a href="http://0.0.0.0:4000，正常情况下应该是最原始的画面，但是我看到的是：" target="_blank" rel="noopener">http://0.0.0.0:4000，正常情况下应该是最原始的画面，但是我看到的是：</a></p><p>白板和Cannot GET / 几个字</p><p>原因：</p><p>由于2.6以后就更新了，我们需要手动配置些东西，我们需要输入下面三行命令：</p><p>npm install hexo-renderer-ejs –save</p><p>npm install hexo-renderer-stylus –save</p><p>npm install hexo-renderer-marked –save</p><p>这个时候再重新生成静态文件，命令：</p><p>hexo generate（或hexo g）</p><p>启动本地服务器：</p><p>hexo server（或hexo s）</p><hr><ul><li><p>Makedown 原生方式</p><p>  | Name | Academy | score |<br>  | - | :-: | -: |<br>  | Harry Potter | Gryffindor| 90 |<br>  | Hermione Granger | Gryffindor | 100 |<br>  | Draco Malfoy | Slytherin | 90 |</p></li></ul><p>Name    Academy     score<br>Harry Potter    Gryffindor  90<br>Hermione Granger    Gryffindor  100<br>Draco Malfoy    Slytherin   90</p><p>语法说明： 1. 不管是哪种方式，第一行为表头，第二行分隔表头和主体部分，第三行开始每一行代表一个表格行；</p><ol><li>列与列之间用管道符号 “|” 隔开，原生方式的表格每一行的两边也要有管道符。</li><li>可在第二行指定不同列单元格内容的对齐方式，默认为左对齐，在 “-” 右边加上 “:” 为右对齐，在 “-” 两侧同时加上 “:” 为居中对齐。</li></ol><ul><li><p>更改nginx网站根目录<br>默认网站根目录为/usr/local/nginx/html，要将它改成/homw/www<br>vi /usr/local/nginx/conf/nginx.conf<br>将其中的</p><pre><code>location / {    root   html;    index  index.php index.html index.htm;}</code></pre><p>改为</p><pre><code>location / {    root   /home/www;    index  index.php index.html index.htm;}</code></pre><p>然后再将<br>location ~ .php$ {</p><pre><code>    root           html;    fastcgi_pass   127.0.0.1:9000;    fastcgi_index  index.php;    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;    include        fastcgi_params;}</code></pre><p>改为<br>location ~ .php$ {</p><pre><code>    root           /home/www;    fastcgi_pass   127.0.0.1:9000;    fastcgi_index  index.php;    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;    include        fastcgi_params;}</code></pre><p>然后重启nginx<br>已经安装了samba，所以要将vi /etc/samba/smb.conf中的[public]下的path值改为<br>path = /home/www/</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote class=&quot;blockquote-center&quot;&gt;&lt;br&gt;Hexo 基本操作及命令&lt;br&gt;&lt;/blockquote&gt;
    
    </summary>
    
    
      <category term="hexo" scheme="http://wongb.in/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>cPanel主机中如何强制使用HTTPS</title>
    <link href="http://wongb.in/2017/12/27/cPanel%E4%B8%BB%E6%9C%BA%E4%B8%AD%E5%A6%82%E4%BD%95%E5%BC%BA%E5%88%B6%E4%BD%BF%E7%94%A8HTTPS/"/>
    <id>http://wongb.in/2017/12/27/cPanel主机中如何强制使用HTTPS/</id>
    <published>2017-12-27T03:23:26.000Z</published>
    <updated>2017-12-31T16:23:13.618Z</updated>
    
    <content type="html"><![CDATA[<div class="note default"><p>cPanel主机中如何强制使用HTTPS 基本操作及命令 </p></div><a id="more"></a><p>在网站站目录下找到 .htaccess,如果没有就新建一个,添加如下代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">         &lt;IfModule mod_rewrite.c&gt;</span><br><span class="line">RewriteEngine On</span><br><span class="line">RewriteCond %&#123;http_host&#125; ^www.aug12th.com$ [NC]</span><br><span class="line">RewriteRule ^(.*)$ https:<span class="comment">//aug12th.com/$1 [R=301,L]</span></span><br><span class="line"></span><br><span class="line">RewriteCond %&#123;SERVER_PORT&#125; !^<span class="number">443</span>$</span><br><span class="line">RewriteRule ^(.*)?$ https:<span class="comment">//%&#123;SERVER_NAME&#125;/$1 [L,R]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RewriteEngine On</span><br><span class="line">RewriteBase /</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-f</span><br><span class="line">RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span><br><span class="line">RewriteRule ^(.*)$ /index.html/$<span class="number">1</span> [L]</span><br><span class="line">&lt;<span class="regexp">/IfModule&gt;</span></span><br></pre></td></tr></table></figure><p>第一块：将所有连接全部跳转到 https 开头的、不带 www 的网址上<br>第二块：伪静态，解决 typecho 烦人的会自带index.html在网址上的问题</p>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note default&quot;&gt;&lt;p&gt;cPanel主机中如何强制使用HTTPS 基本操作及命令 &lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
    
      <category term="hexo" scheme="http://wongb.in/tags/hexo/"/>
    
      <category term="Test" scheme="http://wongb.in/tags/Test/"/>
    
  </entry>
  
  <entry>
    <title>Hexo标签页生成</title>
    <link href="http://wongb.in/2017/12/26/Test/"/>
    <id>http://wongb.in/2017/12/26/Test/</id>
    <published>2017-12-26T14:26:46.000Z</published>
    <updated>2017-12-27T04:48:32.360Z</updated>
    
    <content type="html"><![CDATA[<!-- HTML方式: 直接在 Markdown 文件中编写 HTML 来调用 --><!-- 其中 class="blockquote-center" 是必须的 --><!--blockquote class="blockquote-center">Hexo标签页生成的详细教程，附官方说明文档</blockquote--><div class="note success"><p>Hexo标签页生成的详细教程，附官方说明文档 </p></div><a id="more"></a><p>代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tags: </span><br><span class="line">     - 前端</span><br><span class="line">     - hexo</span><br><span class="line">     categories: </span><br><span class="line">     - 前端</span><br></pre></td></tr></table></figure></p><p>在博客根目录输入</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> page tags</span><br></pre></td></tr></table></figure><p>打开 tags/index.md ，并改成：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: 标签</span><br><span class="line">date: 日期</span><br><span class="line">type: <span class="string">"tags"</span></span><br><span class="line">comments: <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>分类同理</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> page categories</span><br></pre></td></tr></table></figure><p>打开category/index.md，改为：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: 分类</span><br><span class="line">date: 日期</span><br><span class="line">type: <span class="string">"categories"</span></span><br><span class="line">comments: <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>附上文档<a href="https://hexo.io/zh-cn/docs/front-matter.html" target="_blank" rel="noopener">Front-matter</a></p>]]></content>
    
    <summary type="html">
    
      &lt;!-- HTML方式: 直接在 Markdown 文件中编写 HTML 来调用 --&gt;
&lt;!-- 其中 class=&quot;blockquote-center&quot; 是必须的 --&gt;
&lt;!--blockquote class=&quot;blockquote-center&quot;&gt;Hexo标签页生成的详细教程，附官方说明文档&lt;/blockquote--&gt;
&lt;div class=&quot;note success&quot;&gt;&lt;p&gt;Hexo标签页生成的详细教程，附官方说明文档 &lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
    
      <category term="hexo" scheme="http://wongb.in/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>HTTP+SSL</title>
    <link href="http://wongb.in/2017/12/22/http%E8%BD%AChttps/"/>
    <id>http://wongb.in/2017/12/22/http转https/</id>
    <published>2017-12-22T14:50:21.000Z</published>
    <updated>2017-12-27T03:26:52.311Z</updated>
    
    <content type="html"><![CDATA[<div class="note danger"><p>云ESC部署SSL详细方法 </p></div><a id="more"></a><ul><li><p>系统CentOS 7.3 64位  + 环境 Nginx   采用LNMP一键包</p></li><li><p>免费SSL  腾讯 阿里都提供 以腾讯云为例 TrustAsia TLS RSA CA </p></li><li><p>直接申请验证域名信息即可 获取不同环境的crt key</p></li></ul><h3 id="第一步、部署HTTPS基础准备"><a href="#第一步、部署HTTPS基础准备" class="headerlink" title="第一步、部署HTTPS基础准备"></a>第一步、部署HTTPS基础准备</h3><pre><code>　申请SSL 了解直接服务器部署环境 选择对应的</code></pre><h3 id="第二步-上传和部署SSL证书"><a href="#第二步-上传和部署SSL证书" class="headerlink" title="第二步 上传和部署SSL证书"></a>第二步 上传和部署SSL证书</h3><blockquote><p>A - 把上面的一个CRT一个KEY文件上传到VPS<br>    　ROOT目录中，然后对应修改成SSL.CRT和SSL.KEY文件名，或者我们用作其他命令都可以。</p><p>B - 解密私钥和设置权限</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">openssl rsa -<span class="keyword">in</span> ssl.key -out /root/ssl.key</span><br><span class="line">chmod <span class="number">600</span> /root/ssl.key</span><br></pre></td></tr></table></figure><blockquote><p>登录SSH，执行上述两行脚本，解密私钥和授权。</p></blockquote><hr><h3 id="第三步-在LNMP环境部署站点SSL设置"><a href="#第三步-在LNMP环境部署站点SSL设置" class="headerlink" title="第三步 在LNMP环境部署站点SSL设置"></a>第三步 在LNMP环境部署站点SSL设置</h3><blockquote><p>我们需要在已有的LNMP添加了站点，然后在站点对应的CONF文件设置。</p><p>在”/usr/local/nginx/conf/vhost/“目录文件中，找到对应站点的conf文件，然后修改设置如下</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server</span><br><span class="line">&#123;</span><br><span class="line">       listen <span class="number">80</span>;</span><br><span class="line">       listen 443 ssl;                            #1</span><br><span class="line">       #listen [::]:80;                           </span><br><span class="line">       ssl on;                                    #2</span><br><span class="line">       ssl_certificate /root/ssl.crt;             #3</span><br><span class="line">       ssl_certificate_key /root/ssl.key;         #4</span><br><span class="line">       server_name <span class="number">1114.</span>me www<span class="number">.1114</span>.me;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><blockquote><font color="#FF0000"> 上面的#1 2 3 4标注部分是需要我们添加的，对应路径我们要与之前上传的CRT和KEY文件路径对应以及文件名不要搞错。 </font> </blockquote><hr><p>补充官方说明：</p><blockquote><p>Nginx 证书部署<br>获取证书<br>Nginx文件夹内获得SSL证书文件 1_www.domain.com_bundle.crt 和私钥文件 2_www.domain.com.key,<br>1_www.domain.com_bundle.crt 文件包括两段证书代码 “—–BEGIN CERTIFICATE—–”和“—–END CERTIFICATE—–”,<br>2_www.domain.com.key 文件包括一段私钥代码“—–BEGIN RSA PRIVATE KEY—–”和“—–END RSA PRIVATE KEY—–”。</p><p>证书安装</p></blockquote><font color="#FF3300">将域名www.domain.com的证书文件1_www.domain.com_bundle.crt 、私钥文件2_www.domain.com.key保存到同一个目录，例如/usr/local/nginx/conf目录下。<br>更新Nginx根目录下 conf/nginx.conf 文件如下： </font> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen <span class="number">443</span>;</span><br><span class="line">        server_name www.domain.com; #填写绑定证书的域名</span><br><span class="line">        ssl on;</span><br><span class="line">        ssl_certificate <span class="number">1</span>_www.domain.com_bundle.crt;</span><br><span class="line">        ssl_certificate_key <span class="number">2</span>_www.domain.com.key;</span><br><span class="line">        ssl_session_timeout <span class="number">5</span>m;</span><br><span class="line">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #按照这个协议配置</span><br><span class="line">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;#按照这个套件配置</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html; #站点目录</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><hr><p>配置完成后，先用bin/nginx -t来测试下配置是否有误，正确无误的话，重启nginx。就可以使 <a href="https://www.1114.me" target="_blank" rel="noopener">https://www.1114.me</a> 来访问了。</p><hr><ul><li>注：</li></ul><table><thead><tr><th style="text-align:center">配置文件参数</th><th style="text-align:center">标准</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">listen 443</td><td style="text-align:center"></td><td style="text-align:center">SSL访问端口号为443</td></tr><tr><td style="text-align:center">ssl on</td><td style="text-align:center"></td><td style="text-align:center">启用SSL功能</td></tr><tr><td style="text-align:center">ssl_certificate</td><td style="text-align:center"></td><td style="text-align:center">证书文件</td></tr><tr><td style="text-align:center">ssl_certificate_key</td><td style="text-align:center"></td><td style="text-align:center">私钥文件</td></tr><tr><td style="text-align:center">ssl_protocols</td><td style="text-align:center"></td><td style="text-align:center">使用的协议</td></tr><tr><td style="text-align:center">ssl_ciphers</td><td style="text-align:center"></td><td style="text-align:center">配置加密套件，写法遵循openssl标准</td></tr></tbody></table><blockquote><p>最后，我们重启LNMP，可以看到SSL证书生效，且HTTPS可以访问站点。<br>重启LNMP命令</p></blockquote><ul><li><p>使用全站加密，http自动跳转https（可选）<br>对于用户不知道网站可以进行https访问的情况下，让服务器自动把http的请求重定向到https。<br>在服务器这边的话配置的话，可以在页面里加js脚本，也可以在后端程序里写重定向，当然也可以在web服务器来实现跳转。Nginx是支持rewrite的（只要在编译的时候没有去掉pcre）<br>在http的server里增加rewrite ^(.*) <a href="https://$host$1" target="_blank" rel="noopener">https://$host$1</a> permanent;<br>这样就可以实现80进来的请求，重定向为https了。</p></li><li><p>像这样就可以了</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen <span class="number">443</span>;</span><br><span class="line">    server_name <span class="number">1114.</span>me www<span class="number">.1114</span>.me;</span><br><span class="line">    ssl on;</span><br><span class="line">    root html;</span><br><span class="line">    index index.html index.htm;</span><br><span class="line">        ssl_certificate /root/ssl.pem;</span><br><span class="line">        ssl_certificate_key /root/ssl.key;</span><br><span class="line">        ssl_session_timeout <span class="number">5</span>m;</span><br><span class="line">        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">        ssl_protocols TLSv1 TLSv1<span class="number">.1</span> TLSv1<span class="number">.2</span>;</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">    location / &#123;</span><br><span class="line">        root html;(<span class="regexp">/EG/</span>EG/站点目录)</span><br><span class="line">        index index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>如果想要强制 HTTPS，请做如下修改：</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">server</span><br><span class="line">&#123;</span><br><span class="line">    listen <span class="number">80</span>;</span><br><span class="line">    server_name 1114.me www.1114.me;                 # 修改为你的域名</span><br><span class="line">    rewrite ^/(.*) https://www.1114.me/$1 permanent; # 如果你的网站是带 www 的，请在域名前添加 www</span><br><span class="line">&#125;</span><br><span class="line">-------------------------------------------------------------------------------server                  #接上段配置即可</span><br><span class="line">&#123;</span><br><span class="line">    listen <span class="number">443</span>;</span><br><span class="line">    # ...... 其余配置同上</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><blockquote><p>LNMP状态管理命令：</p></blockquote><p>   LNMP状态管理： /root/lnmp {start|stop|reload|restart|kill|status}</p><p>   Nginx状态管理：/etc/init.d/nginx {start|stop|reload|restart}</p><p>   MySQL状态管理：/etc/init.d/mysql {start|stop|restart|reload|force-reload|status}</p><p>   Memcached状态管理：/etc/init.d/memcached {start|stop|restart}</p><p>   PHP-FPM状态管理：/etc/init.d/php-fpm {start|stop|quit|restart|reload|logrotate}</p><p>   PureFTPd状态管理： /etc/init.d/pureftpd {start|stop|restart|kill|status}</p><p>   ProFTPd状态管理： /etc/init.d/proftpd {start|stop|restart|reload}</p><ul><li>如重启LNMP，输入命令：/root/lnmp restart 即可，单独重启mysql：/etc/init.d/mysql restart</li></ul><hr>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note danger&quot;&gt;&lt;p&gt;云ESC部署SSL详细方法 &lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
    
      <category term="SSL" scheme="http://wongb.in/tags/SSL/"/>
    
  </entry>
  
  <entry>
    <title>Diary</title>
    <link href="http://wongb.in/2017/12/17/test-new-blog/"/>
    <id>http://wongb.in/2017/12/17/test-new-blog/</id>
    <published>2017-12-17T14:54:13.000Z</published>
    <updated>2017-12-27T02:57:59.069Z</updated>
    
    <content type="html"><![CDATA[<div class="note primary"><p>纯粹的写作产品 </p></div><a id="more"></a><p> 　　浏览网页偶然看到一个博客主题很简约，去掉多余的功能，大量留白，剩下的空间书写，<br>  就像在写纸质日记一样，这感觉很 <code>奇特</code>！ 比用简书 Wordpress之流显得高了不止一筹。</p><h2 id="喜欢这种纯粹的产品"><a href="#喜欢这种纯粹的产品" class="headerlink" title="喜欢这种纯粹的产品"></a>喜欢这种纯粹的产品</h2><h3 id="所以有一个搭建的想法"><a href="#所以有一个搭建的想法" class="headerlink" title="所以有一个搭建的想法"></a>所以有一个搭建的想法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">说做就做 查阅了一下资料，是利用Hexo 把写的代码渲染成 静态网页</span><br></pre></td></tr></table></figure><p>  所有的东西都由创作者自由编辑，和自己在服务器搭建个人博客没什么<code>两样</code></p><h3 id="完全自主"><a href="#完全自主" class="headerlink" title="完全自主"></a>完全自主</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">享受写作的快乐</span><br></pre></td></tr></table></figure><pre><code>但是需要一定代码基础包括前端技术，作为一个只会增删补改的射击师，还是有点挑战，</code></pre><p>   总能放弃吧，碰到了很多问题，Google到了答案，经过两天的摸索，终于大概怎么去部署<br>   Hexo+GitHub安装插件了，由于对Linux不是特别熟悉，在服务器搭建走了不少弯路，建议，先在本地搭建，对服务器不熟的建议选择Ubuntu，环境比Centos好很多免得很多东西没安装会报错，别问我为什么喜欢Centos，喜欢纯粹的系统QAQ</p><h3 id="Git版本控制-Github远程仓库"><a href="#Git版本控制-Github远程仓库" class="headerlink" title="Git版本控制 Github远程仓库"></a>Git版本控制 Github远程仓库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">先了解基础的概念再上手 会比较容易</span><br></pre></td></tr></table></figure><p>  回过头，想想，其实也不难，环境不同，工具不同，遇到问题，这很正常，<br>通常Google下都会有相关解答，看下，问题产生在哪里，怎么解决问题，解决的思路，以及为什么要这么做，而不是死记硬背硬套，一时解决问题！</p><h3 id="Stay-Hungry-Stay-Foolish"><a href="#Stay-Hungry-Stay-Foolish" class="headerlink" title="Stay Hungry Stay Foolish"></a>Stay Hungry Stay Foolish</h3><p>  最后给用腾讯云Centos7.X的童鞋<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$  npm install -g hexo-cli</span><br><span class="line">  先yum -y install openssl</span><br></pre></td></tr></table></figure></p><p>  这个困扰我半个小时QAQ 其他命令官网都有说明<br>  英文不太好的童鞋 eg me 可以用Chrome 右键翻译为汉语</p>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note primary&quot;&gt;&lt;p&gt;纯粹的写作产品 &lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
    
      <category term="日记" scheme="http://wongb.in/tags/%E6%97%A5%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Image</title>
    <link href="http://wongb.in/2017/12/17/hello-world/"/>
    <id>http://wongb.in/2017/12/17/hello-world/</id>
    <published>2017-12-17T06:33:32.000Z</published>
    <updated>2017-12-27T04:28:13.314Z</updated>
    
    <content type="html"><![CDATA[<div class="note info"><p>测试图片 </p></div><a id="more"></a><!-- 别名 --><span itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"><img itemprop="url image" src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1514126503&amp;di=a48919843fa72f4e6a50585ab3484b6e&amp;imgtype=jpg&amp;er=1&amp;src=http%3A%2F%2Fimage5.tuku.cn%2Fpic%2Fwallpaper%2Ffengjing%2Fchaodachicunziranjingguanbizhi%2F004.jpg" class="full-image" alt="alt" title="七牛图床 实名认证也就算了 还要手持身份证 WTF 有一种裸贷的感觉"><meta itemprop="width" content="auto"><meta itemprop="height" content="auto"></span>]]></content>
    
    <summary type="html">
    
      &lt;div class=&quot;note info&quot;&gt;&lt;p&gt;测试图片 &lt;/p&gt;&lt;/div&gt;
    
    </summary>
    
    
      <category term="Test" scheme="http://wongb.in/tags/Test/"/>
    
  </entry>
  
</feed>
